<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.platon.browser.persistence.dao.mapper.ProposalBusinessMapper">
<update id="vote" parameterType="com.platon.browser.common.complement.dto.proposal.ProposalText">
    insert into `vote`
    (
        `hash`,
        `node_name`,
        `node_id`,
        `option`,
        `proposal_hash`,
        `timestamp`
    )
    values
    (
        #{txHash},
        #{stakingName},
        #{nodeId},
        #{voteOption},
        #{proposalHash},
        #{timestamp}
    );

    insert into `node_opt`
    (
        `node_id`,
        `type`,
        `tx_hash`,
        `b_num`,
        `time`,
        `desc`
    )
    values
    (
        #{nodeId},
        '5',
        #{txHash},
        #{bNum},
        #{timestamp},
        #{optDesc}
    );
</update>
</mapper>