<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.platon.browser.complement.mapper.StakeBusinessMapper">
<update id="modify" parameterType="com.platon.browser.common.complement.param.stake.StakeModify">
	update `staking` set
		`node_name` = #{nodeName},
		`external_id` = #{externalId},
		`benefit_addr` = #{benefitAddr},
		`web_site` = #{webSite},
		`details` = #{details},
		`is_init` =  #{isInit}
	 where
		`node_id` = #{nodeId}
	 and
		`staking_block_num` = #{stakingBlockNum};

	update `node` set
	 	`node_name` = #{nodeName},
	  	`external_id` = #{externalId},
	    `benefit_addr` = #{benefitAddr},
		`web_site` = #{webSite},
		`details` = #{details},
		`is_init` = #{isInit}
	where `node_id` = #{nodeId};

	insert into `node_opt`
		(`node_id`,
		`type`,
		`tx_hash`,
		`b_num`,
		`time`
		)
	values
		(#{nodeId},
		'2',
		#{txHash},
		#{bNum},
		#{time}
		);

</update>
</mapper>